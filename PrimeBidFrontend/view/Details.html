<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auction Item Page</title>
    <link rel="stylesheet" href="css/Details.css">
</head>
<body>
    <div class="auction-container">
        <div class="back-link">
            <a href="#">← Back to Search</a>
        </div>
        <div class="auction-content">
            <div class="thumbnail-images">
                <img id="thumbnail-1" src="" alt="Thumbnail 1"> <br>
                <img id="thumbnail-2" src="" alt="Thumbnail 2"> <br>
                <img id="thumbnail-3" src="" alt="Thumbnail 3">
            </div>
            <div class="image-gallery">
                <div class="main-image">
                    <img id="main-image" src="" alt="Main Image">
                </div>
            </div>
            <div class="auction-details">
                <h1 id="item-name">Product Name</h1>
                <div class="bid-info-row">
                    <p class="current-bid">Current Bid: <span id="currentBid">$0 USD</span> • <span id="totalBids">0 bids</span></p>
                    <p class="estimate">Estimated: <span id="estimatedBid">$0 - $0 USD</span></p>
                </div>
                <div class="bid-section">
                    <label for="max-bid">Set Max Bid:</label>
                    <select id="max-bid">
                        <!-- Bid options dynamically generated -->
                    </select>
                    <button class="place-bid-btn" id="placeBidBtn">Place Bid</button>
                </div>
                <p class="description" id="item-description">
                    Description goes here.
                </p>
                <p class="ends-in">Ends in: <strong id="end-date">Loading...</strong></p>
                <div class="watchlist">
                    <a href="#">Add to watchlist</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Fetch Product Data via JavaScript -->
    <script>
        // Function to fetch product details from your back-end API
        async function fetchProductDetails(productId) {
            try {
                // Use the correct API endpoint and pass the productId parameter
                const response = await fetch(`https://localhost:7217/products/${productId}`); // Replace with the actual endpoint
                const product = await response.json();

                // Dynamically update the HTML content with product details
                document.getElementById('item-name').innerText = product.itemName;
                //document.getElementById('currentBid').innerText = `$${product.estimatedBid} USD`;
                //document.getElementById('totalBids').innerText = `${product.bidHistories.length} bids`;
                document.getElementById('estimatedBid').innerText = `$${product.estimatedBid} USD`;
                document.getElementById('item-description').innerText = product.itemDescription;
                document.getElementById('end-date').innerText = new Date(product.endDate).toLocaleString();

                // Set image sources dynamically (if available)
                //document.getElementById('main-image').src = `/images/${product.itemImage}`;
                //document.getElementById('thumbnail-1').src = `/images/${product.itemImage}`;
                //document.getElementById('thumbnail-2').src = `/images/${product.itemImage}`;
                //document.getElementById('thumbnail-3').src = `/images/${product.itemImage}`;

                // Optional: dynamically add bid options
                //const bidSelect = document.getElementById('max-bid');
                //[100, 200, 300, 400].foreach(amount => {
                //   const option = document.createelement('option');
                //    option.text = `$${amount} usd`;
                //    bidselect.add(option);
                //});
            } catch (error) {
                console.error('Error fetching product details:', error);
            }
        }

        // Fetch product details on page load (replace with the actual product ID if needed)
        fetchProductDetails(1);  // Hardcoded product ID; change dynamically as needed
    </script>

</body>
</html>
